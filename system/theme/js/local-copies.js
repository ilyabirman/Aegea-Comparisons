$&&$(function(){function e(e){var t=document.cookie.match(new RegExp("(?:^|; )"+e.replace(/([\.$?*|{}\(\)\[\]\\\/\+^])/g,"\\$1")+"=([^;]*)"));return t?decodeURIComponent(t[1]):void 0}document.e2=document.e2||{},document.e2.isLocalStorageAvailable=function(){try{return localStorage.setItem("test","test"),localStorage.removeItem("test"),!0}catch(e){return!1}}(),document.e2.isLocalStorageAvailable&&(document.e2.localCopies={_lsKey:"copies-info",_lsPrefix:"copy-",_cookieName:document.e2.cookiePrefix+"local_copies",getListName:function(){return this._lsKey},getPrefix:function(){return this._lsPrefix},getName:function(e){return this._lsPrefix+e},save:function(e,t){localStorage.setItem(this.getName(e),JSON.stringify(t)),this.addToList(e,t)},remove:function(e){localStorage.removeItem(this.getName(e)),this.removeFromList(e)},get:function(e,t,o){var i=!1;try{if(i=JSON.parse(localStorage.getItem(this.getName(e))),!i)return!1}catch(s){return!1}return o&&t&&this.isCopyOutdated(i,t,o)?(this.remove(e),!1):i},getList:function(){try{return JSON.parse(localStorage.getItem(this._lsKey))||{}}catch(e){return{}}},addToList:function(e,t){var o=this.getList();o.hasOwnProperty(e)||(o[e]={isPublished:t.isPublished,timestamp:t.timestamp},localStorage.setItem(this._lsKey,JSON.stringify(o)),this.updateCookie(o))},removeFromList:function(e){var t=this.getList();t.hasOwnProperty(e)&&(delete t[e],localStorage.setItem(this._lsKey,JSON.stringify(t)),this.updateCookie(t))},doesCopyExist:function(e){return localStorage.hasOwnProperty(this.getName(e))},isCopyOutdated:function(e,t,o){if(!t||!o)return!1;var i=+e.timestamp,s=(new Date).getTime(),r=o-s;return Math.abs(r)>216e6&&(t-=r),i<=t},checkOutdatedCopies:function(){var e=document.e2.noteLastModifiedsById||{},t=this.getList();for(var o in t)"new"!==o&&(e.hasOwnProperty(o)?this.isCopyOutdated(t[o],1e3*e[o],1e3*document.e2.serverTime)&&this.remove(o):this.remove(o))},generateCookie:function(){e(this._cookieName)||this.updateCookie()},updateCookie:function(e){e=e||this.getList();var t=[];for(var o in e)"new"!==o&&t.push(o);if(t.length)document.cookie=this._cookieName+"="+t.join(",")+";path=/";else{var i=new Date;i.setTime(i.getTime()-1),document.cookie=this._cookieName+'="";path=/;expires='+i.toUTCString()}}},document.e2.localCopies.checkOutdatedCopies(),document.e2.localCopies.generateCookie())});